<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Refined AI</title>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:        #F9FAFB;
  --white:     #FFFFFF;
  --border:    #E5E7EB;
  --text:      #111827;
  --sub:       #374151;
  --muted:     #6B7280;
  --light:     #9CA3AF;
  --accent:    #2563EB;
  --accent-bg: #EFF6FF;
  --accent-md: #BFDBFE;
  --green:     #10B981;
  --r:         12px;
  --sw:        200px;
  --rw:        220px;
  --ui:        'Instrument Sans', -apple-system, sans-serif;
  --body:      'Plus Jakarta Sans', -apple-system, sans-serif;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: var(--body);
  background: var(--bg);
  color: var(--text);
  display: flex;
  height: 100vh;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes shimmer {
  from { background-position: -500px 0; }
  to   { background-position:  500px 0; }
}
.sk {
  background: linear-gradient(90deg,#f0f0f0 25%,#e6e6e6 50%,#f0f0f0 75%);
  background-size: 500px 100%;
  animation: shimmer 1.3s infinite linear;
  border-radius: 6px;
}
.sk-card {
  background: var(--white); border: 1px solid var(--border);
  border-radius: var(--r); padding: 22px 24px; margin-bottom: 10px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEFT SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
  width: var(--sw);
  background: var(--white);
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column;
  flex-shrink: 0;
  overflow: hidden;
}

/* ë¡œê³  */
.logo {
  display: flex; align-items: center; gap: 9px;
  padding: 20px 16px 18px;
  border-bottom: 1px solid var(--border);
}
.logo-icon {
  width: 30px; height: 30px;
  background: linear-gradient(135deg,#2563EB,#7C3AED);
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.logo-icon svg { width: 15px; height: 15px; }
.logo-name { font-family: var(--ui); font-size: 13px; font-weight: 700; color: var(--text); line-height: 1.2; }
.logo-sub  { font-size: 9.5px; color: var(--muted); }

/* Latest Update ë²„íŠ¼ */
.update-wrap { padding: 14px 14px 0; }

.update-btn {
  width: 100%;
  background: var(--bg);
  border: 1.5px solid var(--border);
  border-radius: var(--r);
  padding: 12px 13px;
  cursor: pointer; text-align: left;
  transition: border-color .2s, box-shadow .2s;
}
.update-btn:hover { border-color: var(--accent); box-shadow: 0 2px 10px rgba(37,99,235,.09); }
.update-btn:disabled { opacity: .6; cursor: not-allowed; }

.update-top {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 8px;
}
.update-label {
  font-family: var(--ui); font-size: 9.5px; font-weight: 700;
  text-transform: uppercase; letter-spacing: .7px;
  color: var(--accent); display: flex; align-items: center; gap: 5px;
}
.u-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--green); flex-shrink: 0;
}
.u-dot.spin { background: #F59E0B; animation: blink .8s ease-in-out infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.3} }

.refresh-ico { color: var(--light); display: flex; align-items: center; }
.update-btn.spinning .refresh-ico svg { animation: rotate .7s linear infinite; }
@keyframes rotate { to { transform: rotate(360deg); } }

.u-time-lbl { font-family: var(--ui); font-size: 9.5px; color: var(--muted); display: block; margin-bottom: 2px; }
.u-time-val { font-family: var(--ui); font-size: 13px; font-weight: 600; color: var(--text); display: block; }
.u-msg { font-family: var(--ui); font-size: 10px; color: var(--muted); margin-top: 5px; min-height: 13px; line-height: 1.4; }

/* Hot Topics */
.hot-wrap { padding: 18px 14px; flex: 1; overflow-y: auto; }
.hot-wrap::-webkit-scrollbar { display:none; }
.section-lbl {
  font-family: var(--ui); font-size: 9.5px; font-weight: 700;
  letter-spacing: .9px; text-transform: uppercase;
  color: var(--light); margin-bottom: 10px;
}
.hot-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 8px 10px; border-radius: 9px; cursor: pointer;
  border: 1px solid transparent;
  transition: background .15s, border-color .15s;
  margin-bottom: 2px; user-select: none;
}
.hot-item:hover { background: var(--bg); }
.hot-item.on { background: var(--accent-bg); border-color: var(--accent-md); }
.hot-left { display: flex; align-items: center; gap: 5px; }
.hot-hash { font-family: var(--ui); font-size: 11.5px; color: var(--light); font-weight: 500; }
.hot-name { font-family: var(--ui); font-size: 12px; font-weight: 500; color: var(--text); }
.hot-item.on .hot-name { color: var(--accent); font-weight: 600; }
.hot-cnt {
  font-family: var(--ui); font-size: 10px; font-weight: 600;
  background: var(--bg); color: var(--muted);
  padding: 1px 6px; border-radius: 10px; min-width: 22px; text-align: center;
}
.hot-item.on .hot-cnt { background: var(--accent-bg); color: var(--accent); }
.hot-empty { font-size: 11.5px; color: var(--light); font-family: var(--ui); padding: 4px 2px; }
.tag-clear {
  font-family: var(--ui); font-size: 11px; font-weight: 500;
  color: var(--accent); background: none; border: none;
  cursor: pointer; padding: 6px 10px; border-radius: 8px;
  width: 100%; text-align: left; margin-top: 4px;
  transition: background .15s;
}
.tag-clear:hover { background: var(--accent-bg); }

/* AI Insight */
.insight-wrap { padding: 0 14px 18px; }
.insight-card {
  background: var(--bg); border-radius: var(--r);
  padding: 13px; border: 1px solid var(--border);
}
.ins-head { display: flex; align-items: center; gap: 5px; margin-bottom: 7px; }
.ins-dot  { width: 6px; height: 6px; border-radius: 50%; background: var(--accent); flex-shrink: 0; }
.ins-lbl  { font-family: var(--ui); font-size: 9.5px; font-weight: 700; color: var(--accent); letter-spacing: .3px; }
.ins-q    { font-size: 11.5px; line-height: 1.6; color: var(--sub); font-style: italic; margin-bottom: 10px; }
.ins-auth { display: flex; align-items: center; gap: 7px; }
.ins-av {
  width: 24px; height: 24px; border-radius: 50%;
  background: linear-gradient(135deg,#6366F1,#8B5CF6);
  display: flex; align-items: center; justify-content: center;
  font-size: 9px; font-weight: 700; color: #fff;
  font-family: var(--ui); flex-shrink: 0;
}
.ins-name { font-size: 10.5px; font-weight: 600; color: var(--text); font-family: var(--ui); }
.ins-role { font-size: 9.5px; color: var(--muted); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main { flex:1; display:flex; flex-direction:column; overflow:hidden; }

/* TOPBAR */
.topbar {
  height: 52px; background: var(--white);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; padding: 0 24px; gap: 12px;
  flex-shrink: 0;
}
.search-wrap {
  display: flex; align-items: center; gap: 8px;
  background: var(--bg); border: 1.5px solid var(--border);
  border-radius: 9px; padding: 6px 13px;
  flex: 1; max-width: 340px;
  transition: border-color .2s;
}
.search-wrap:focus-within { border-color: var(--accent); }
.search-wrap input {
  border: none; background: none; outline: none;
  font-size: 13px; color: var(--text);
  font-family: var(--body); width: 100%;
}
.search-wrap input::placeholder { color: var(--light); }

.topbar-logo {
  margin-left: auto;
  font-family: var(--ui); font-size: 15px; font-weight: 700;
  color: var(--text); letter-spacing: -.3px;
}

/* CONTENT */
.content { flex:1; overflow-y:auto; padding: 28px 28px 40px; }
.content::-webkit-scrollbar { width: 4px; }
.content::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

.feed-hd { margin-bottom: 20px; }
.feed-title {
  font-family: var(--ui); font-size: 24px; font-weight: 700;
  letter-spacing: -.5px; color: var(--text); margin-bottom: 5px;
}
.feed-sub { font-size: 13px; color: var(--muted); line-height: 1.6; }

/* ì¹´í…Œê³ ë¦¬ íƒ­ */
.cat-bar { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 20px; }
.cat-tab {
  font-family: var(--ui); font-size: 12px; font-weight: 500;
  padding: 5px 14px; border-radius: 20px;
  border: 1.5px solid var(--border); background: var(--white);
  color: var(--muted); cursor: pointer;
  transition: all .15s; user-select: none; white-space: nowrap;
}
.cat-tab:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-bg); }
.cat-tab.on { background: var(--accent); border-color: var(--accent); color: #fff; font-weight: 600; }

/* status */
.status-bar {
  display: flex; align-items: center; gap: 6px;
  font-size: 11px; color: var(--light); margin-bottom: 14px;
  font-family: var(--ui);
}
.s-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--accent); flex-shrink: 0;
  animation: blink 1.2s ease-in-out infinite;
}
.s-dot.idle  { background: var(--green); animation: none; }
.s-dot.warn  { background: #F59E0B; animation: none; }
.s-dot.err   { background: #EF4444; animation: none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NEWS CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
  background: var(--white); border: 1px solid var(--border);
  border-radius: var(--r); padding: 22px 24px; margin-bottom: 10px;
  cursor: pointer; opacity: 0;
  animation: up .35s ease forwards;
  transition: box-shadow .2s, border-color .2s;
}
.card:hover { box-shadow: 0 3px 18px rgba(0,0,0,.06); border-color: #D1D5DB; }
@keyframes up { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

/* ì¹´í…Œê³ ë¦¬ ë°°ì§€ + ë‚ ì§œ */
.card-top { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
.c-badge {
  font-family: var(--ui); font-size: 9.5px; font-weight: 700;
  text-transform: uppercase; letter-spacing: .4px;
  padding: 3px 9px; border-radius: 20px;
  background: var(--accent-bg); color: var(--accent); border: 1px solid var(--accent-md);
}
.c-svc  { background:#DBEAFE; color:#1D4ED8; border-color:#BFDBFE; }
.c-ux   { background:#FCE7F3; color:#9D174D; border-color:#FBCFE8; }
.c-fut  { background:#EDE9FE; color:#5B21B6; border-color:#DDD6FE; }
.c-hnd  { background:#D1FAE5; color:#065F46; border-color:#A7F3D0; }
.c-ind  { background:#FEF3C7; color:#92400E; border-color:#FDE68A; }

.c-date { font-family: var(--ui); font-size: 11px; color: var(--light); }

/* ì œëª© */
.c-title {
  font-family: var(--ui); font-size: 18px; font-weight: 700;
  line-height: 1.38; letter-spacing: -.35px; color: var(--text);
  margin-bottom: 10px;
}

/* íƒœê·¸ ì¹© (ìµœëŒ€ 5ê°œ) */
.c-chips { display:flex; flex-wrap:wrap; gap:5px; margin-bottom: 12px; }
.c-chip {
  font-family: var(--ui); font-size: 10.5px; font-weight: 500;
  padding: 2px 9px; border-radius: 20px;
  background: var(--bg); color: var(--muted); border: 1px solid var(--border);
  transition: all .15s;
}
.card:hover .c-chip { border-color: #D1D5DB; }

/* ìš”ì•½ (line-clamp 3) */
.c-desc {
  font-size: 13.5px; line-height: 1.75; color: var(--sub);
  white-space: pre-wrap;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ë¹ˆ ìƒíƒœ / ì—ëŸ¬ */
.empty { text-align:center; padding:70px 0; font-family: var(--ui); }
.empty-ic   { font-size:34px; margin-bottom:12px; }
.empty-ttl  { font-size:15px; font-weight:600; color:var(--text); margin-bottom:5px; }
.empty-desc { font-size:13px; color:var(--muted); }

.err-notice {
  background:#FFFBEB; border:1px solid #FDE68A;
  border-radius:10px; padding:10px 15px;
  font-size:11.5px; color:#92400E; margin-bottom:14px;
  line-height:1.6; font-family: var(--ui);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.overlay {
  position: fixed; inset: 0;
  background: rgba(17,24,39,.45);
  backdrop-filter: blur(4px);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000; padding: 24px;
  opacity: 0; pointer-events: none;
  transition: opacity .22s ease;
}
.overlay.open { opacity: 1; pointer-events: all; }

.modal {
  background: var(--white);
  border-radius: 16px;
  width: 100%; max-width: 640px;
  max-height: 82vh;
  display: flex; flex-direction: column;
  box-shadow: 0 24px 60px rgba(0,0,0,.18);
  transform: translateY(16px) scale(.98);
  transition: transform .22s ease;
  overflow: hidden;
}
.overlay.open .modal { transform: translateY(0) scale(1); }

.modal-head {
  padding: 22px 24px 16px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.modal-meta {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 12px;
}
.modal-badge-wrap { display: flex; align-items: center; gap: 8px; }
.m-date { font-family: var(--ui); font-size: 11px; color: var(--light); }
.modal-close {
  width: 28px; height: 28px; border-radius: 8px;
  border: 1px solid var(--border); background: var(--white);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--muted);
  transition: background .15s, border-color .15s;
  flex-shrink: 0;
}
.modal-close:hover { background: var(--bg); border-color: #D1D5DB; color: var(--text); }

.modal-title {
  font-family: var(--ui); font-size: 20px; font-weight: 700;
  line-height: 1.38; letter-spacing: -.4px; color: var(--text);
}

.modal-chips { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 12px; }
.modal-chip {
  font-family: var(--ui); font-size: 10.5px; font-weight: 500;
  padding: 2px 9px; border-radius: 20px;
  background: var(--bg); color: var(--muted); border: 1px solid var(--border);
}

.modal-body {
  padding: 20px 24px; overflow-y: auto; flex: 1;
}
.modal-body::-webkit-scrollbar { width: 4px; }
.modal-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

.modal-summary-lbl {
  font-family: var(--ui); font-size: 10px; font-weight: 700;
  text-transform: uppercase; letter-spacing: .7px;
  color: var(--accent); margin-bottom: 10px;
}
.modal-text {
  font-size: 14.5px; line-height: 1.82; color: var(--sub);
  white-space: pre-wrap;
}

.modal-foot {
  padding: 16px 24px;
  border-top: 1px solid var(--border);
  flex-shrink: 0;
}
.modal-link {
  display: inline-flex; align-items: center; gap: 7px;
  font-family: var(--ui); font-size: 13px; font-weight: 600;
  color: var(--white); background: var(--accent);
  padding: 9px 18px; border-radius: 9px; text-decoration: none;
  transition: opacity .15s;
}
.modal-link:hover { opacity: .85; }
</style>
</head>
<body>

<!-- â•â• SIDEBAR â•â• -->
<aside class="sidebar">

  <div class="logo">
    <div class="logo-icon">
      <svg viewBox="0 0 16 16" fill="none">
        <path d="M8 2L14 5.5V10.5L8 14L2 10.5V5.5L8 2Z" stroke="#fff" stroke-width="1.4" stroke-linejoin="round"/>
        <circle cx="8" cy="8" r="2" fill="#fff"/>
      </svg>
    </div>
    <div>
      <div class="logo-name">Refined AI</div>
      <div class="logo-sub">Hybrid News Edition</div>
    </div>
  </div>

  <!-- Latest Update -->
  <div class="update-wrap">
    <button class="update-btn" id="updateBtn" onclick="doRefresh()">
      <div class="update-top">
        <div class="update-label">
          <div class="u-dot" id="uDot"></div>
          Latest Update
        </div>
        <div class="refresh-ico" id="rIco">
          <svg width="13" height="13" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.7">
            <path d="M13.5 2.5A6.5 6.5 0 1 1 7 1.5" stroke-linecap="round"/>
            <path d="M13.5 2.5V6.5H9.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
      <span class="u-time-lbl">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</span>
      <span class="u-time-val" id="uTime">â€”</span>
      <div class="u-msg" id="uMsg"></div>
    </button>
  </div>

  <!-- Hot Topics -->
  <div class="hot-wrap">
    <div class="section-lbl">Hot Topics</div>
    <div id="hotList"><div class="hot-empty">íƒœê·¸ ë¶„ì„ ì¤‘...</div></div>
    <button class="tag-clear" id="tagClear" style="display:none" onclick="clearTag()">âœ• íƒœê·¸ í•„í„° í•´ì œ</button>
  </div>

  <!-- AI Insight -->
  <div class="insight-wrap">
    <div class="insight-card">
      <div class="ins-head">
        <div class="ins-dot"></div>
        <div class="ins-lbl">AI Daily Insight</div>
      </div>
      <div class="ins-q">"The shift from LLM scaling to efficient architecture is the defining trend. Expect more 'small-but-mighty' models."</div>
      <div class="ins-auth">
        <div class="ins-av">SO</div>
        <div>
          <div class="ins-name">Dr. Sarah Chen</div>
          <div class="ins-role">AI Lead</div>
        </div>
      </div>
    </div>
  </div>

</aside>

<!-- â•â• MAIN â•â• -->
<div class="main">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="search-wrap">
      <svg width="13" height="13" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.8">
        <circle cx="6.5" cy="6.5" r="5"/><path d="M10.5 10.5L14 14" stroke-linecap="round"/>
      </svg>
      <input type="text" id="searchInput" placeholder="ì œëª© ë˜ëŠ” ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰..." oninput="render()">
    </div>
    <div class="topbar-logo">AI News Refined</div>
  </div>

  <!-- FEED -->
  <div class="content">
    <div class="feed-hd">
      <div class="feed-title">Today's Briefing</div>
      <div class="feed-sub">High-legibility summaries synthesized from across the web.</div>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
    <div class="cat-bar">
      <div class="cat-tab on" data-cat="all">ì „ì²´</div>
      <div class="cat-tab" data-cat="AI Service &amp; Tools">AI Service &amp; Tools</div>
      <div class="cat-tab" data-cat="UX/UI Insights">UX/UI Insights</div>
      <div class="cat-tab" data-cat="Future of Design">Future of Design</div>
      <div class="cat-tab" data-cat="Hands-on">Hands-on</div>
      <div class="cat-tab" data-cat="Industry News">Industry News</div>
    </div>

    <div class="status-bar">
      <div class="s-dot" id="sDot"></div>
      <span id="sTxt">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
    </div>
    <div id="notice"></div>
    <div id="cards"></div>
  </div>
</div>

<!-- â•â• MODAL â•â• -->
<div class="overlay" id="overlay" onclick="overlayClick(event)">
  <div class="modal" id="modal">
    <div class="modal-head">
      <div class="modal-meta">
        <div class="modal-badge-wrap">
          <span class="c-badge" id="mBadge"></span>
          <span class="m-date" id="mDate"></span>
        </div>
        <button class="modal-close" onclick="closeModal()" title="ë‹«ê¸°">
          <svg width="13" height="13" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 2l12 12M14 2L2 14" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="modal-title" id="mTitle"></div>
      <div class="modal-chips" id="mChips"></div>
    </div>
    <div class="modal-body">
      <div class="modal-summary-lbl">Summary</div>
      <div class="modal-text" id="mText"></div>
    </div>
    <div class="modal-foot">
      <a class="modal-link" id="mLink" href="#" target="_blank" rel="noopener">
        <svg width="13" height="13" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M7 3H3a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V9"/>
          <path d="M10 2h4v4M14 2L7 9" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        ì›ë¬¸ ì½ê¸° (Original Post)
      </a>
    </div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âœ… ì„¤ì •
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SHEET_ID = '1svPblrYOAz3AcJ4hrmA4MEzDYl_tpO0igS6wsWT6qRc';
const CSV_URL  = () => `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=0&t=${Date.now()}`;

const COL = { TITLE:0, DESC:1, DATE:2, LINK:3, CAT:4, TAGS:5 };

/* ë”ë¯¸ ë°ì´í„° */
const DUMMY = [
  ['Figma AI ê¸°ëŠ¥ ëŒ€ê±° ì—…ë°ì´íŠ¸','Figmaê°€ AI ê¸°ë°˜ ìë™ ë ˆì´ì•„ì›ƒ ì¡°ì •, ì½˜í…ì¸  ìƒì„±, ì ‘ê·¼ì„± ê²€ì‚¬ ê¸°ëŠ¥ì„ ëŒ€í­ ê°•í™”í–ˆìŠµë‹ˆë‹¤.\në””ìì´ë„ˆì˜ ë°˜ë³µ ì‘ì—…ì„ ì¤„ì´ê³  ì°½ì˜ì  ì‘ì—…ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ì›Œí¬í”Œë¡œìš°ê°€ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.\níŠ¹íˆ Auto Layoutê³¼ Variables ì—°ë™ì´ ê°•í™”ë˜ì–´ ë””ìì¸ ì‹œìŠ¤í…œ ê´€ë¦¬ê°€ í•œì¸µ í¸ë¦¬í•´ì¡ŒìŠµë‹ˆë‹¤.','2024-06-01','https://figma.com','UX/UI Insights','Figma,ë””ìì¸íˆ´,AIë””ìì¸,UX,ì›Œí¬í”Œë¡œìš°'],
  ['Claude APIë¡œ ë§Œë“œëŠ” AI ê¸€ì“°ê¸° ì–´ì‹œìŠ¤í„´íŠ¸','Anthropic Claude APIë¥¼ í™œìš©í•´ ì‹¤ì‹œê°„ ê¸€ì“°ê¸° í”¼ë“œë°±ê³¼ ìŠ¤íƒ€ì¼ êµì • ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì†Œê°œí•©ë‹ˆë‹¤.\nì´ˆë³´ìë„ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œ ì˜ˆì œì™€ í•¨ê»˜ ì„¤ëª…í•©ë‹ˆë‹¤.\nìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì²˜ë¦¬ì™€ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ íŒë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.','2024-05-28','https://anthropic.com','Hands-on','Claude,API,ê¸€ì“°ê¸°,íŠœí† ë¦¬ì–¼,AI'],
  ['2025 UX íŠ¸ë Œë“œ: AIì™€ ì¸ê°„ì˜ í˜‘ì—… ì„¤ê³„','AIê°€ ì¼ìƒí™”ëœ ì‹œëŒ€, UX ë””ìì´ë„ˆì˜ ì—­í• ì€ ì–´ë–»ê²Œ ë³€í™”í• ê¹Œìš”?\nì¸ê°„ ì¤‘ì‹¬ AI ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ ì›ì¹™ê³¼ ì‹¤ì œ ì‚¬ë¡€ë¥¼ í†µí•´ ë¯¸ë˜ UXì˜ ë°©í–¥ì„±ì„ íƒìƒ‰í•©ë‹ˆë‹¤.\nìŒì„± UI, ë©€í‹°ëª¨ë‹¬ ì¸í„°ë™ì…˜, ì‹ ë¢° ì„¤ê³„ ì›ì¹™ì´ í•µì‹¬ í‚¤ì›Œë“œë¡œ ë– ì˜¤ë¥´ê³  ìˆìŠµë‹ˆë‹¤.','2024-05-25','https://uxdesign.cc','Future of Design','UXíŠ¸ë Œë“œ,AIì¸í„°í˜ì´ìŠ¤,ë¯¸ë˜ë””ìì¸,UX,ìŒì„±UI'],
  ['Notion AI 2.0 ì¶œì‹œ â€” ìƒì‚°ì„± ë„êµ¬ì˜ ìƒˆ ê¸°ì¤€','Notionì´ AI ê¸°ëŠ¥ì„ ì „ë©´ ê°œí¸í•œ Notion AI 2.0ì„ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤.\në¬¸ì„œ ìš”ì•½, ìë™ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±, ë§ì¶¤í˜• ì›Œí¬í”Œë¡œìš° ì œì•ˆ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ íŒ€ ìƒì‚°ì„±ì„ í•œì¸µ ë†’ì˜€ìŠµë‹ˆë‹¤.\níŠ¹íˆ Slack, Jiraì™€ì˜ ë„¤ì´í‹°ë¸Œ ì—°ë™ì´ ê°•í™”ë˜ì–´ ì˜¬ì¸ì› ì—…ë¬´ í—ˆë¸Œë¡œ ìë¦¬ë§¤ê¹€í•˜ê³  ìˆìŠµë‹ˆë‹¤.','2024-05-20','https://notion.so','AI Service & Tools','Notion,ìƒì‚°ì„±,í˜‘ì—…íˆ´,AI,ì›Œí¬í”Œë¡œìš°'],
  ['ì‚¼ì„± MXì‚¬ì—…ë¶€, AI ë””ìì¸ ì‹œìŠ¤í…œ ê³µê°œ','ì‚¼ì„±ì „ì MXì‚¬ì—…ë¶€ê°€ ìì²´ AI ê¸°ë°˜ ë””ìì¸ ì‹œìŠ¤í…œ Galaxy Designì„ ì™¸ë¶€ì— ê³µê°œí–ˆìŠµë‹ˆë‹¤.\nì»´í¬ë„ŒíŠ¸ ìë™ ìƒì„±ê³¼ ë‹¤í¬ëª¨ë“œ ìµœì í™” ê¸°ëŠ¥ì´ í•µì‹¬ì´ë©°, ì ‘ê·¼ì„± ê°€ì´ë“œë¼ì¸ë„ ëŒ€í­ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\nì˜¤í”ˆì†ŒìŠ¤ë¡œ ê³µê°œëœ ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” GitHubì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.','2024-05-15','https://samsung.com','Industry News','ì‚¼ì„±,ë””ìì¸ì‹œìŠ¤í…œ,ëª¨ë°”ì¼UI,AI,ì˜¤í”ˆì†ŒìŠ¤'],
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let rows     = [];
let activeCat = 'all';
let activeTag = null;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function esc(s) {
  return String(s||'')
    .replace(/&/g,'&amp;').replace(/</g,'&lt;')
    .replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}
function fmtDate(s) {
  if (!s) return '';
  const d = new Date(s);
  if (isNaN(d)) return s;
  const diff = (Date.now()-d)/1000;
  if (diff<3600)    return `${Math.floor(diff/60)}ë¶„ ì „`;
  if (diff<86400)   return `${Math.floor(diff/3600)}ì‹œê°„ ì „`;
  if (diff<172800)  return '1ì¼ ì „';
  if (diff<2592000) return `${Math.floor(diff/86400)}ì¼ ì „`;
  return d.toLocaleDateString('ko-KR',{month:'short',day:'numeric'});
}
function fmtFull(d) {
  if (!d) return 'â€”';
  return d.toLocaleString('ko-KR',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'})
    .replace(/\. /g,'.').replace(/\.$/, '');
}
function parseTags(s) {
  return (s||'').split(',').map(t=>t.trim()).filter(Boolean);
}
function badgeClass(cat) {
  const c=(cat||'').toLowerCase();
  if(c.includes('service')||c.includes('tool')) return 'c-svc';
  if(c.includes('ux')||c.includes('ui'))        return 'c-ux';
  if(c.includes('future'))                       return 'c-fut';
  if(c.includes('hands'))                        return 'c-hnd';
  if(c.includes('industry'))                     return 'c-ind';
  return '';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SKELETON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showSkeleton() {
  document.getElementById('cards').innerHTML = [1,2,3,4].map(()=>`
    <div class="sk-card">
      <div style="display:flex;justify-content:space-between;margin-bottom:12px">
        <div class="sk" style="height:18px;width:100px;border-radius:20px"></div>
        <div class="sk" style="height:10px;width:60px"></div>
      </div>
      <div class="sk" style="height:22px;width:72%;margin-bottom:6px"></div>
      <div class="sk" style="height:22px;width:52%;margin-bottom:14px"></div>
      <div style="display:flex;gap:5px;margin-bottom:14px">
        ${[60,48,72].map(w=>`<div class="sk" style="height:20px;width:${w}px;border-radius:20px"></div>`).join('')}
      </div>
      <div class="sk" style="height:12px;margin-bottom:7px"></div>
      <div class="sk" style="height:12px;width:80%;margin-bottom:7px"></div>
      <div class="sk" style="height:12px;width:60%"></div>
    </div>`).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARD BUILD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildCard(row, idx, animIdx) {
  const title = row[COL.TITLE]||'ì œëª© ì—†ìŒ';
  const desc  = row[COL.DESC] ||'';
  const date  = row[COL.DATE] ||'';
  const cat   = row[COL.CAT]  ||'';
  const tags  = parseTags(row[COL.TAGS]).slice(0,5);

  const chips = tags.map(t=>`<span class="c-chip">#${esc(t)}</span>`).join('');

  return `<div class="card" style="animation-delay:${animIdx*50}ms" onclick="openModal(${idx})">
    <div class="card-top">
      <span class="c-badge ${badgeClass(cat)}">${esc(cat)||'General'}</span>
      <span class="c-date">${esc(fmtDate(date))}</span>
    </div>
    <div class="c-title">${esc(title)}</div>
    ${chips?`<div class="c-chips">${chips}</div>`:''}
    <div class="c-desc">${esc(desc)}</div>
  </div>`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function render() {
  const q = (document.getElementById('searchInput').value||'').trim().toLowerCase();
  let filtered = rows;
  if (activeCat!=='all') filtered = filtered.filter(r=>(r[COL.CAT]||'').trim()===activeCat);
  if (activeTag)         filtered = filtered.filter(r=>parseTags(r[COL.TAGS]).includes(activeTag));
  if (q) filtered = filtered.filter(r=>
    (r[COL.TITLE]||'').toLowerCase().includes(q)||
    (r[COL.DESC] ||'').toLowerCase().includes(q)
  );

  // ì‘ì„±ì¼(Cì—´) ê¸°ì¤€ ìµœì‹ ìˆœ ì •ë ¬
  filtered = [...filtered].sort((a, b) => new Date(b[COL.DATE]||0) - new Date(a[COL.DATE]||0));


  const el = document.getElementById('cards');
  if (!filtered.length) {
    el.innerHTML=`<div class="empty">
      <div class="empty-ic">ğŸ”</div>
      <div class="empty-ttl">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>
      <div class="empty-desc">${q?`'${esc(q)}'ì— í•´ë‹¹í•˜ëŠ” ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”.`:'ì„ íƒí•œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ì½˜í…ì¸ ê°€ ì—†ì–´ìš”.'}</div>
    </div>`;
    return;
  }
  // ì›ë³¸ ì¸ë±ìŠ¤ë¥¼ ìœ ì§€í•´ì„œ ëª¨ë‹¬ì—ì„œ row ì°¸ì¡°
  el.innerHTML = filtered.map((row,i)=>{
    const origIdx = rows.indexOf(row);
    return buildCard(row, origIdx, i);
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CATEGORY TABS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.querySelectorAll('.cat-tab').forEach(t=>{
  t.addEventListener('click',()=>{
    document.querySelectorAll('.cat-tab').forEach(x=>x.classList.remove('on'));
    t.classList.add('on');
    activeCat = t.dataset.cat;
    render();
  });
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOT TOPICS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildHot() {
  const freq={};
  rows.forEach(r=>parseTags(r[COL.TAGS]).forEach(t=>{freq[t]=(freq[t]||0)+1;}));
  const top5=Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,5);
  const el=document.getElementById('hotList');
  if(!top5.length){el.innerHTML='<div class="hot-empty">íƒœê·¸ ì—†ìŒ</div>';return;}
  el.innerHTML=top5.map(([tag,cnt])=>`
    <div class="hot-item ${activeTag===tag?'on':''}" onclick="selectTag('${esc(tag)}')">
      <div class="hot-left"><span class="hot-hash">#</span><span class="hot-name">${esc(tag)}</span></div>
      <span class="hot-cnt">${cnt}</span>
    </div>`).join('');
}
function selectTag(tag) {
  activeTag=(activeTag===tag)?null:tag;
  document.getElementById('tagClear').style.display=activeTag?'block':'none';
  buildHot(); render();
}
function clearTag() {
  activeTag=null;
  document.getElementById('tagClear').style.display='none';
  buildHot(); render();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openModal(idx) {
  const row   = rows[idx];
  const title = row[COL.TITLE]||'ì œëª© ì—†ìŒ';
  const desc  = row[COL.DESC] ||'';
  const date  = row[COL.DATE] ||'';
  const link  = row[COL.LINK] ||'#';
  const cat   = row[COL.CAT]  ||'';
  const tags  = parseTags(row[COL.TAGS]);

  document.getElementById('mBadge').textContent = cat||'General';
  document.getElementById('mBadge').className   = `c-badge ${badgeClass(cat)}`;
  document.getElementById('mDate').textContent  = fmtDate(date);
  document.getElementById('mTitle').textContent = title;
  document.getElementById('mText').textContent  = desc;
  document.getElementById('mLink').href         = link||'#';
  document.getElementById('mChips').innerHTML   = tags.map(t=>`<span class="modal-chip">#${esc(t)}</span>`).join('');

  document.getElementById('overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeModal() {
  document.getElementById('overlay').classList.remove('open');
  document.body.style.overflow = '';
}
function overlayClick(e) {
  if (e.target===document.getElementById('overlay')) closeModal();
}
document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATUS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setStatus(msg, state) {
  document.getElementById('sTxt').textContent = msg;
  document.getElementById('sDot').className   = 's-dot '+(state||'');
}
function setTime(d) {
  document.getElementById('uTime').textContent = d ? fmtFull(d) : 'â€”';
}
function setUMsg(msg) {
  document.getElementById('uMsg').textContent = msg;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CSV LOAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadCSV() {
  const res = await fetch(CSV_URL(), {cache:'no-store'});
  if (!res.ok) throw new Error(`HTTP ${res.status}`);
  const csv = await res.text();
  return new Promise((ok, fail) => {
    Papa.parse(csv, {
      skipEmptyLines: true,
      complete(r) {
        let data = r.data;
        if (data.length) {
          const isHdr = data[0].some(v=>
            ['ì œëª©','title','ìš”ì•½','summary','ì¹´í…Œê³ ë¦¬','category','íƒœê·¸','tag','tags']
            .includes((v||'').toLowerCase().trim()));
          if (isHdr) data = data.slice(1);
        }
        data = data.filter(row=>row.some(v=>v&&v.trim()));
        if (!data.length) fail(new Error('ì‹œíŠ¸ì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤'));
        else ok(data);
      },
      error(e) { fail(new Error('íŒŒì‹± ì‹¤íŒ¨: '+e.message)); }
    });
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REFRESH (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function doRefresh() {
  const btn = document.getElementById('updateBtn');
  btn.disabled = true;
  btn.classList.add('spinning');
  document.getElementById('uDot').classList.add('spin');
  setUMsg('ìƒˆë¡œê³ ì¹¨ ì¤‘...');
  setTimeout(()=>{ window.location.reload(); }, 400);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function init() {
  showSkeleton();
  setStatus('ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...','');
  try {
    rows = await loadCSV();
    render(); buildHot();
    setTime(new Date());
    setUMsg('');
    document.getElementById('notice').innerHTML='';
    setStatus(`${rows.length}ê°œ ì•„í‹°í´ Â· ì—°ë™ ì™„ë£Œ âœ“`,'idle');
  } catch(e) {
    rows = DUMMY;
    render(); buildHot();
    setTime(new Date());
    setUMsg('');
    document.getElementById('notice').innerHTML=
      `<div class="err-notice">âš  êµ¬ê¸€ ì‹œíŠ¸ ì—°ê²° ì‹¤íŒ¨ â€” ë¯¸ë¦¬ë³´ê¸° ë°ì´í„° í‘œì‹œ ì¤‘. GitHub Pages ë°°í¬ í›„ ì‹¤ì œ ë°ì´í„°ê°€ ë¡œë“œë©ë‹ˆë‹¤.</div>`;
    setStatus(`ë¯¸ë¦¬ë³´ê¸° ë°ì´í„° Â· ${DUMMY.length}ê°œ`,'warn');
  }
}

init();
</script>
</body>
</html>
